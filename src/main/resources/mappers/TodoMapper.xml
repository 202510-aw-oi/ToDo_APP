<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.todo.mapper.TodoMapper">
    <select id="selectByTitleLike" parameterType="string" resultType="com.example.todo.entity.Todo">
        SELECT
            id,
            author,
            title,
            detail,
            description,
            type,
            priority,
            created_at,
            updated_at,
            due_date
        FROM todos
        <where>
            <if test="keyword != null and keyword != ''">
                title LIKE CONCAT('%', #{keyword}, '%')
            </if>
        </where>
        ORDER BY created_at DESC
    </select>

    <select id="countByTitleLike" parameterType="string" resultType="long">
        SELECT COUNT(*)
        FROM todos
        <where>
            <if test="keyword != null and keyword != ''">
                title LIKE CONCAT('%', #{keyword}, '%')
            </if>
        </where>
    </select>
</mapper>
